<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>Docs For Class CalDAVRequest</title>
			<link rel="stylesheet" href="../../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
			<div class="page-body">			
<h2 class="class-name"><img src="../../media/images/Class_logo.png"
														alt=" Class"
														title=" Class"
														style="vertical-align: middle"> CalDAVRequest</h2>

<a name="sec-description"></a>
<div class="info-box">
	<div class="info-box-title">Description</div>
	<div class="nav-bar">
					<span class="disabled">Description</span> |
													<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
						|											<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
						
					</div>
	<div class="info-box-body">
        		<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">A class for collecting things to do with this request.</p>
		<p class="notes">
			Located in <a class="field" href="_inc---CalDAVRequest.php.html">/inc/CalDAVRequest.php</a> (line <span class="field">28</span>)
		</p>
		
				
		<pre></pre>
	
			</div>
</div>



	<a name="sec-var-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Variable Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
						<span class="disabled">Vars</span> (<a href="#sec-vars">details</a>)
							| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
								</div>
		<div class="info-box-body">
			<div class="var-summary">
																																																																																																																																<div class="var-title">
					<img src="../../media/images/Variable.png" alt=" " />
					<span class="var-type">mixed</span>
					<a href="#$collection_id" title="details" class="var-name">$collection_id</a>
				</div>
																<div class="var-title">
					<img src="../../media/images/Variable.png" alt=" " />
					<span class="var-type">mixed</span>
					<a href="#$collection_path" title="details" class="var-name">$collection_path</a>
				</div>
																<div class="var-title">
					<img src="../../media/images/Variable.png" alt=" " />
					<span class="var-type">mixed</span>
					<a href="#$collection_type" title="details" class="var-name">$collection_type</a>
				</div>
																<div class="var-title">
					<img src="../../media/images/Variable.png" alt=" " />
					<span class="var-type">mixed</span>
					<a href="#$current_user_principal_xml" title="details" class="var-name">$current_user_principal_xml</a>
				</div>
																<div class="var-title">
					<img src="../../media/images/Variable.png" alt=" " />
					<span class="var-type">mixed</span>
					<a href="#$depth" title="details" class="var-name">$depth</a>
				</div>
																<div class="var-title">
					<img src="../../media/images/Variable.png" alt=" " />
					<span class="var-type">mixed</span>
					<a href="#$exists" title="details" class="var-name">$exists</a>
				</div>
																<div class="var-title">
					<img src="../../media/images/Variable.png" alt=" " />
					<span class="var-type">mixed</span>
					<a href="#$method" title="details" class="var-name">$method</a>
				</div>
																<div class="var-title">
					<img src="../../media/images/Variable.png" alt=" " />
					<span class="var-type">mixed</span>
					<a href="#$options" title="details" class="var-name">$options</a>
				</div>
																<div class="var-title">
					<img src="../../media/images/Variable.png" alt=" " />
					<span class="var-type"><a href="../../davical/Principal/CalDAVPrincipal.html">CalDAVPrincipal</a></span>
					<a href="#$principal" title="details" class="var-name">$principal</a>
				</div>
																<div class="var-title">
					<img src="../../media/images/Variable.png" alt=" " />
					<span class="var-type">mixed</span>
					<a href="#$privileges" title="details" class="var-name">$privileges</a>
				</div>
																<div class="var-title">
					<img src="../../media/images/Variable.png" alt=" " />
					<span class="var-type">mixed</span>
					<a href="#$raw_post" title="details" class="var-name">$raw_post</a>
				</div>
																<div class="var-title">
					<img src="../../media/images/Variable.png" alt=" " />
					<span class="var-type">mixed</span>
					<a href="#$supported_privileges" title="details" class="var-name">$supported_privileges</a>
				</div>
																<div class="var-title">
					<img src="../../media/images/Variable.png" alt=" " />
					<span class="var-type">mixed</span>
					<a href="#$ticket" title="details" class="var-name">$ticket</a>
				</div>
																<div class="var-title">
					<img src="../../media/images/Variable.png" alt=" " />
					<span class="var-type">mixed</span>
					<a href="#$user_agent" title="details" class="var-name">$user_agent</a>
				</div>
											</div>
		</div>
	</div>

	<a name="sec-method-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Method Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
																		<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
				 
				|
						<span class="disabled">Methods</span> (<a href="#sec-methods">details</a>)
		</div>
		<div class="info-box-body">			
			<div class="method-summary">
																																																																																																																																																																																																																																																																<div class="method-definition">
					<img src="../../media/images/Constructor.png" alt=" "/>
											<span class="method-result">CalDAVRequest</span>
										<a href="#__construct" title="details" class="method-name">__construct</a>
											([<span class="var-type"></span>&nbsp;<span class="var-name">$options</span> = <span class="var-default">array()</span>])
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#AllowedTo" title="details" class="method-name">AllowedTo</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$activity</span>)
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#BuildSupportedPrivileges" title="details" class="method-name">BuildSupportedPrivileges</a>
											(<span class="var-type"></span>&nbsp;<span class="var-name">&$reply</span>, [<span class="var-type"></span>&nbsp;<span class="var-name">$privs</span> = <span class="var-default">null</span>])
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#CoerceContentType" title="details" class="method-name">CoerceContentType</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#CollectionId" title="details" class="method-name">CollectionId</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#dav_name" title="details" class="method-name">dav_name</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#DepthRegexTail" title="details" class="method-name">DepthRegexTail</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#DoResponse" title="details" class="method-name">DoResponse</a>
											(<span class="var-type">int</span>&nbsp;<span class="var-name">$status</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$message</span> = <span class="var-default">&quot;&quot;</span>], [<span class="var-type"></span>&nbsp;<span class="var-name">$content_type</span> = <span class="var-default">&quot;text/plain; charset=\&quot;utf-8\&quot;&quot;</span>])
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">mixed</span>
										<a href="#FailIfLocked" title="details" class="method-name">FailIfLocked</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#GetDepthName" title="details" class="method-name">GetDepthName</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#GetLockDetails" title="details" class="method-name">GetLockDetails</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$lock_token</span>)
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#GetLockRow" title="details" class="method-name">GetLockRow</a>
											(<span class="var-type"></span>&nbsp;<span class="var-name">$lock_token</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$dav_name</span>)
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#HavePrivilegeTo" title="details" class="method-name">HavePrivilegeTo</a>
											(<span class="var-type"></span>&nbsp;<span class="var-name">$do_what</span>)
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#IsAddressBook" title="details" class="method-name">IsAddressBook</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#IsCalendar" title="details" class="method-name">IsCalendar</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#IsCollection" title="details" class="method-name">IsCollection</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#IsInfiniteDepth" title="details" class="method-name">IsInfiniteDepth</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#IsLocked" title="details" class="method-name">IsLocked</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#IsPrincipal" title="details" class="method-name">IsPrincipal</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#IsProxyRequest" title="details" class="method-name">IsProxyRequest</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#IsPublic" title="details" class="method-name">IsPublic</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#MalformedRequest" title="details" class="method-name">MalformedRequest</a>
											([<span class="var-type">string</span>&nbsp;<span class="var-name">$text</span> = <span class="var-default">'Bad request'</span>])
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#NeedPrivilege" title="details" class="method-name">NeedPrivilege</a>
											(<span class="var-type"></span>&nbsp;<span class="var-name">$privileges</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$href</span> = <span class="var-default">null</span>], <span class="var-type">string</span>&nbsp;<span class="var-name">$privilege</span>)
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#PreconditionFailed" title="details" class="method-name">PreconditionFailed</a>
											(<span class="var-type">int</span>&nbsp;<span class="var-name">$status</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$precondition</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$explanation</span> = <span class="var-default">''</span>])
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#Privileges" title="details" class="method-name">Privileges</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#setPermissions" title="details" class="method-name">setPermissions</a>
											(<span class="var-type">int</span>&nbsp;<span class="var-name">$user_no</span>)
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#UnsupportedRequest" title="details" class="method-name">UnsupportedRequest</a>
											(<span class="var-type">array</span>&nbsp;<span class="var-name">$unsupported</span>)
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#UserFromPath" title="details" class="method-name">UserFromPath</a>
										()
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#ValidateLockToken" title="details" class="method-name">ValidateLockToken</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$lock_token</span>)
									</div>
																<div class="method-definition">
					<img src="../../media/images/Method.png" alt=" "/>
											<span class="method-result">void</span>
										<a href="#XMLResponse" title="details" class="method-name">XMLResponse</a>
											(<span class="var-type">int</span>&nbsp;<span class="var-name">$status</span>, <span class="var-type">XMLElement</span>&nbsp;<span class="var-name">$xmltree</span>)
									</div>
											</div>
		</div>
	</div>		

	<a name="sec-vars"></a>
	<div class="info-box">
		<div class="info-box-title">Variables</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
										<a href="#sec-var-summary">Vars</a> (<span class="disabled">details</span>)
						
			
										| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
					</div>
		<div class="info-box-body">
			
<a name="var$collection_id" id="$collection_id"><!-- --></A>
<div class="evenrow">

	<div class="var-header">
		<img src="../../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$collection_id</span>
						(line <span class="line-number">68</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">The ID of the collection containing this path, or of this path if it is a collection</p>
	
	
		
		

</div>
<a name="var$collection_path" id="$collection_path"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<img src="../../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$collection_path</span>
						(line <span class="line-number">73</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">The path corresponding to the collection_id</p>
	
	
		
		

</div>
<a name="var$collection_type" id="$collection_type"><!-- --></A>
<div class="evenrow">

	<div class="var-header">
		<img src="../../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$collection_type</span>
						(line <span class="line-number">79</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">The type of collection being requested:</p>
<p class="description"><p>calendar, schedule-inbox, schedule-outbox</p></p>
	
	
		
		

</div>
<a name="var$current_user_principal_xml" id="$current_user_principal_xml"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<img src="../../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$current_user_principal_xml</span>
						(line <span class="line-number">58</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">The 'current_user_principal_xml' the DAV:current-user-principal answer. An  XMLElement object with an &lt;href&gt; or &lt;unauthenticated&gt; fragment.</p>
	
	
		
		

</div>
<a name="var$depth" id="$depth"><!-- --></A>
<div class="evenrow">

	<div class="var-header">
		<img src="../../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$depth</span>
						(line <span class="line-number">46</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">The depth parameter from the request headers, coerced into a valid integer: 0, 1  or DEPTH_INFINITY which is defined above.  The default is set per various RFCs.</p>
	
	
		
		

</div>
<a name="var$exists" id="$exists"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<img src="../../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$exists</span>
						(line <span class="line-number">85</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">The type of collection being requested:</p>
<p class="description"><p>calendar, schedule-inbox, schedule-outbox</p></p>
	<ul class="tags">
				<li><span class="field">access:</span> protected</li>
			</ul>
	
	
		
		

</div>
<a name="var$method" id="$method"><!-- --></A>
<div class="evenrow">

	<div class="var-header">
		<img src="../../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$method</span>
						(line <span class="line-number">40</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">The HTTP request method: PROPFIND, LOCK, REPORT, OPTIONS, etc...</p>
	
	
		
		

</div>
<a name="var$options" id="$options"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<img src="../../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$options</span>
						(line <span class="line-number">30</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
	
	
		
		

</div>
<a name="var$principal" id="$principal"><!-- --></A>
<div class="evenrow">

	<div class="var-header">
		<img src="../../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type"><a href="../../davical/Principal/CalDAVPrincipal.html">CalDAVPrincipal</a></span>
			<span class="var-name">$principal</span>
						(line <span class="line-number">52</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">The 'principal' (user/resource/...) which this request seeks to access</p>
	
	
		
		

</div>
<a name="var$privileges" id="$privileges"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<img src="../../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$privileges</span>
						(line <span class="line-number">90</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">The decimal privileges allowed by this user to the identified resource.</p>
	<ul class="tags">
				<li><span class="field">access:</span> protected</li>
			</ul>
	
	
		
		

</div>
<a name="var$raw_post" id="$raw_post"><!-- --></A>
<div class="evenrow">

	<div class="var-header">
		<img src="../../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$raw_post</span>
						(line <span class="line-number">35</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">The raw data sent along with the request</p>
	
	
		
		

</div>
<a name="var$supported_privileges" id="$supported_privileges"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<img src="../../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$supported_privileges</span>
						(line <span class="line-number">95</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">A static structure of supported privileges.</p>
	
	
		
		

</div>
<a name="var$ticket" id="$ticket"><!-- --></A>
<div class="evenrow">

	<div class="var-header">
		<img src="../../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$ticket</span>
						(line <span class="line-number">100</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">A DAVTicket object, if there is a ?ticket=id or Ticket: id with this request</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	
		
		

</div>
<a name="var$user_agent" id="$user_agent"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<img src="../../media/images/Variable.png" />
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$user_agent</span>
						(line <span class="line-number">63</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">The user agent making the request.</p>
	
	
		
		

</div>
						
		</div>
	</div>
	
	<a name="sec-methods"></a>
	<div class="info-box">
		<div class="info-box-title">Methods</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
															<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
														<a href="#sec-method-summary">Methods</a> (<span class="disabled">details</span>)
						
		</div>
		<div class="info-box-body">
			<A NAME='method_detail'></A>
<a name="method__construct" id="__construct"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Constructor.png" />
		<span class="method-title">Constructor __construct</span> (line <span class="line-number">105</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Create a new CalDAVRequest object.</p>
	
	<div class="method-signature">
		<span class="method-result">CalDAVRequest</span>
		<span class="method-name">
			__construct
		</span>
					([<span class="var-type"></span>&nbsp;<span class="var-name">$options</span> = <span class="var-default">array()</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type"></span>
				<span class="var-name">$options</span>			</li>
				</ul>
		
			
	</div>
<a name="methodAllowedTo" id="AllowedTo"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">AllowedTo</span> (line <span class="line-number">1001</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Are we allowed to do the requested activity</p>
<p class="description"><p>+------------+------------------------------------------------------+  | METHOD     | PRIVILEGES                                           |  +------------+------------------------------------------------------+  | MKCALENDAR | DAV:bind                                             |  | REPORT     | DAV:read or CALDAV:read-free-busy (on all referenced |  |            | resources)                                           |  +------------+------------------------------------------------------+</p></p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			AllowedTo
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$activity</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$activity</span><span class="var-description">: The activity we want to do.</span>			</li>
				</ul>
		
			
	</div>
<a name="methodBuildSupportedPrivileges" id="BuildSupportedPrivileges"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">BuildSupportedPrivileges</span> (line <span class="line-number">963</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns the array of supported privileges converted into XMLElements</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			BuildSupportedPrivileges
		</span>
					(<span class="var-type"></span>&nbsp;<span class="var-name">&$reply</span>, [<span class="var-type"></span>&nbsp;<span class="var-name">$privs</span> = <span class="var-default">null</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type"></span>
				<span class="var-name">&$reply</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$privs</span>			</li>
				</ul>
		
			
	</div>
<a name="methodCoerceContentType" id="CoerceContentType"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">CoerceContentType</span> (line <span class="line-number">860</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Coerces the Content-type of the request into something valid/appropriate</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			CoerceContentType
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodCollectionId" id="CollectionId"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">CollectionId</span> (line <span class="line-number">955</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns the ID of the collection of, or containing this request</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			CollectionId
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methoddav_name" id="dav_name"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">dav_name</span> (line <span class="line-number">726</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns the dav_name of the resource in our internal namespace</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			dav_name
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodDepthRegexTail" id="DepthRegexTail"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">DepthRegexTail</span> (line <span class="line-number">744</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns the tail of a Regex appropriate for this Depth, when appended to</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			DepthRegexTail
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodDoResponse" id="DoResponse"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">DoResponse</span> (line <span class="line-number">1178</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Utility function we call when we have a simple status-based response to  return to the client.  Possibly</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			DoResponse
		</span>
					(<span class="var-type">int</span>&nbsp;<span class="var-name">$status</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$message</span> = <span class="var-default">&quot;&quot;</span>], [<span class="var-type"></span>&nbsp;<span class="var-name">$content_type</span> = <span class="var-default">&quot;text/plain; charset=\&quot;utf-8\&quot;&quot;</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">int</span>
				<span class="var-name">$status</span><span class="var-description">: The HTTP status code to send.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$message</span><span class="var-description">: The friendly text message to send with the response.</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$content_type</span>			</li>
				</ul>
		
			
	</div>
<a name="methodFailIfLocked" id="FailIfLocked"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">FailIfLocked</span> (line <span class="line-number">825</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">This will either (a) return false if no locks apply, or (b) return the lock_token  which the request successfully included to open the lock, or:  (c) respond directly to the client with the failure.</p>
	<ul class="tags">
				<li><span class="field">return:</span> false (no lock) or opaquelocktoken (opened lock)</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">mixed</span>
		<span class="method-name">
			FailIfLocked
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodGetDepthName" id="GetDepthName"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">GetDepthName</span> (line <span class="line-number">735</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns the name for this depth: 0, 1, infinity</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			GetDepthName
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodGetLockDetails" id="GetLockDetails"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">GetLockDetails</span> (line <span class="line-number">811</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns the DB object associated with a lock token, or false.</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			GetLockDetails
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$lock_token</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$lock_token</span><span class="var-description">: The opaquelocktoken which we are looking for</span>			</li>
				</ul>
		
			
	</div>
<a name="methodGetLockRow" id="GetLockRow"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">GetLockRow</span> (line <span class="line-number">755</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns the locked row, either from the cache or from the database</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			GetLockRow
		</span>
					(<span class="var-type"></span>&nbsp;<span class="var-name">$lock_token</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$dav_name</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$dav_name</span><span class="var-description">: The resource which we want to know the lock status for</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$lock_token</span>			</li>
				</ul>
		
			
	</div>
<a name="methodHavePrivilegeTo" id="HavePrivilegeTo"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">HavePrivilegeTo</span> (line <span class="line-number">1074</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Is the user has the privileges to do what is requested.</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			HavePrivilegeTo
		</span>
					(<span class="var-type"></span>&nbsp;<span class="var-name">$do_what</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type"></span>
				<span class="var-name">$do_what</span>			</li>
				</ul>
		
			
	</div>
<a name="methodIsAddressBook" id="IsAddressBook"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">IsAddressBook</span> (line <span class="line-number">916</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns true if the URL referenced by this request points at an addressbook collection.</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			IsAddressBook
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodIsCalendar" id="IsCalendar"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">IsCalendar</span> (line <span class="line-number">907</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns true if the URL referenced by this request points at a calendar collection.</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			IsCalendar
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodIsCollection" id="IsCollection"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">IsCollection</span> (line <span class="line-number">896</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns true if the URL referenced by this request points at a collection.</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			IsCollection
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodIsInfiniteDepth" id="IsInfiniteDepth"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">IsInfiniteDepth</span> (line <span class="line-number">947</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns true if the request asked for infinite depth</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			IsInfiniteDepth
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodIsLocked" id="IsLocked"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">IsLocked</span> (line <span class="line-number">678</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Checks whether the resource is locked, returning any lock token, or false</p>
	<ul class="tags">
				<li><span class="field">todo:</span> This logic does not catch all locking scenarios.  For example an infinite  depth request should check the permissions for all collections and resources within  that.  At present we only maintain permissions on a per-collection basis though.</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			IsLocked
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodIsPrincipal" id="IsPrincipal"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">IsPrincipal</span> (line <span class="line-number">925</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns true if the URL referenced by this request points at a principal.</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			IsPrincipal
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodIsProxyRequest" id="IsProxyRequest"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">IsProxyRequest</span> (line <span class="line-number">936</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Returns true if the URL referenced by this request is within a proxy URL</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			IsProxyRequest
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodIsPublic" id="IsPublic"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">IsPublic</span> (line <span class="line-number">715</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Checks whether the collection is public</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			IsPublic
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodMalformedRequest" id="MalformedRequest"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">MalformedRequest</span> (line <span class="line-number">1151</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Send a simple error informing the client that was a malformed request</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			MalformedRequest
		</span>
					([<span class="var-type">string</span>&nbsp;<span class="var-name">$text</span> = <span class="var-default">'Bad request'</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$text</span><span class="var-description">: An optional text description of the failure.</span>			</li>
				</ul>
		
			
	</div>
<a name="methodNeedPrivilege" id="NeedPrivilege"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">NeedPrivilege</span> (line <span class="line-number">1110</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Send a need-privileges error response.  This function will only return  if the $href is not supplied and the current user has the specified  permission for the request path.</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			NeedPrivilege
		</span>
					(<span class="var-type"></span>&nbsp;<span class="var-name">$privileges</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$href</span> = <span class="var-default">null</span>], <span class="var-type">string</span>&nbsp;<span class="var-name">$privilege</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$privilege</span><span class="var-description">: The name of the needed privilege.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$href</span><span class="var-description">: The unconstructed URI where we needed the privilege.</span>			</li>
					<li>
				<span class="var-type"></span>
				<span class="var-name">$privileges</span>			</li>
				</ul>
		
			
	</div>
<a name="methodPreconditionFailed" id="PreconditionFailed"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">PreconditionFailed</span> (line <span class="line-number">1135</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Send an error response for a failed precondition.</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			PreconditionFailed
		</span>
					(<span class="var-type">int</span>&nbsp;<span class="var-name">$status</span>, <span class="var-type">string</span>&nbsp;<span class="var-name">$precondition</span>, [<span class="var-type">string</span>&nbsp;<span class="var-name">$explanation</span> = <span class="var-default">''</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">int</span>
				<span class="var-name">$status</span><span class="var-description">: The status code for the failed precondition.  Normally 403</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$precondition</span><span class="var-description">: The namespaced precondition tag.</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$explanation</span><span class="var-description">: An optional text explanation for the failure.</span>			</li>
				</ul>
		
			
	</div>
<a name="methodPrivileges" id="Privileges"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">Privileges</span> (line <span class="line-number">1066</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Return the privileges bits for the current session user to this resource</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			Privileges
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodsetPermissions" id="setPermissions"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">setPermissions</span> (line <span class="line-number">610</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Permissions are controlled as follows:</p>
<p class="description"><p><ol><li>if the path is '/', the request has read privileges</li><li>if the requester is an admin, the request has read/write priviliges</li><li>if there is a &lt;user name&gt; component which matches the logged on user
     then the request has read/write privileges</li><li>otherwise we query the defined relationships between users and use
     the minimum privileges returned from that analysis.</li></ol></p></p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			setPermissions
		</span>
					(<span class="var-type">int</span>&nbsp;<span class="var-name">$user_no</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">int</span>
				<span class="var-name">$user_no</span><span class="var-description">: The current user number</span>			</li>
				</ul>
		
			
	</div>
<a name="methodUnsupportedRequest" id="UnsupportedRequest"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">UnsupportedRequest</span> (line <span class="line-number">1087</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Sometimes it's a perfectly formed request, but we just don't do that :-(</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			UnsupportedRequest
		</span>
					(<span class="var-type">array</span>&nbsp;<span class="var-name">$unsupported</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$unsupported</span><span class="var-description">: An array of the properties we don't support.</span>			</li>
				</ul>
		
			
	</div>
<a name="methodUserFromPath" id="UserFromPath"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">UserFromPath</span> (line <span class="line-number">562</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Work out the user whose calendar we are accessing, based on elements of the path.</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			UserFromPath
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodValidateLockToken" id="ValidateLockToken"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">ValidateLockToken</span> (line <span class="line-number">780</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Checks to see whether the lock token given matches one of the ones handed in  with the request.</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			ValidateLockToken
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$lock_token</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$lock_token</span><span class="var-description">: The opaquelocktoken which we are looking for</span>			</li>
				</ul>
		
			
	</div>
<a name="methodXMLResponse" id="XMLResponse"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<img src="../../media/images/Method.png" />
		<span class="method-title">XMLResponse</span> (line <span class="line-number">1163</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Send an XML Response.  This function will never return.</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			XMLResponse
		</span>
					(<span class="var-type">int</span>&nbsp;<span class="var-name">$status</span>, <span class="var-type">XMLElement</span>&nbsp;<span class="var-name">$xmltree</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">int</span>
				<span class="var-name">$status</span><span class="var-description">: The HTTP status to respond</span>			</li>
					<li>
				<span class="var-type">XMLElement</span>
				<span class="var-name">$xmltree</span><span class="var-description">: An XMLElement tree to be rendered</span>			</li>
				</ul>
		
			
	</div>
						
		</div>
	</div>

	
	<p class="notes" id="credit">
		Documentation generated on Tue, 28 Dec 2010 02:16:03 +1300 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.3</a>
	</p>
	</div></body>
</html>